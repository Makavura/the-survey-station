<div class="container m-5 mx-auto" *ngIf="!showCanvas">
    <div class="m-10">
        <input type="text" name="price" id="price" class="focus:ring-indigo-500 
        focus:border-indigo-500 
        block w-full pl-7 pr-12 
        border
        sm:text-sm border-gray-300 rounded-full"
        placeholder="Search for survey by title"
        >
    </div>

    <div class="mt-10">
        <div class="m-10" *ngIf="surveys?.length == 0">
            <p class="text-red-600 text-center" *ngIf="!showCanvas">
                No Surveys Currently exist
            </p>

            <div class="text-center" *ngIf="isAdmin">
                <button (click)="toggleCanvasDisplay($event)" *ngIf="!showCanvas" class="border border-gray-300 bg-indigo-600 text-white rounded-xl px-4 mt-4 ml-2" >
                    Create New Survey
                </button>
            </div>
        </div>
    </div>  
</div>

<div class="container mx-auto m-5" *ngIf="showCanvas">

    <div class="w-full text-left m-10" *ngIf="isAdmin">
        <h3>
            Welcome to your survey canvas
        </h3>
        <span class="text-xs">
            Create a new survey
        </span>
    </div>

    <div class="m-10 border border-2 rounded-lg border-gray-300 p-4">
        <div class="mx-auto mt-10 border border-2 rounded-lg border-gray-300 p-4">
            <div class="" *ngIf="!surveyTitleSet">
                <form [formGroup]="surveyForm" (ngSubmit)="onSubmitSurveyTitle()">
                    <div class="p-2">
                        <label for="Title" class="block text-sm font-medium text-gray-700 pb-4 ml-2">
                            Set Survey Title
                        </label>
                        <input 
                        type="text" 
                        name="title"  
                        formControlName="title"
                            class="block w-full ml-2 sm:text-sm"
                            placeholder="Survey Title">
                    </div>
                    <div class="text-right">
                        <button type="submit" class="border border-gray-300 rounded-xl px-4 mt-4 ml-2" *ngIf="isAdmin">
                            Set Title
                        </button>
                    </div>
                </form>
            </div>
            <div class="" *ngIf="surveyTitleSet">
                <div>
                    <span class="text-3xl bold">
                        {{surveyTitle}}
                    </span>
                </div>

                <div class="mt-10 border border-2 rounded-lg border-gray-300 p-4">

                    <form [formGroup]="form" (ngSubmit)="onSubmitSurvey()">
                        <formly-form 
                        [form]="form" 
                        [fields]="fields" 
                        [model]="model">
                        </formly-form>

                        <div class="text-right">
                            <button type="submit" class="border border-gray-300 rounded-xl px-4" *ngIf="isAdmin">
                                Submit Survey
                            </button>
                        </div>
                      </form>
                </div>
            </div>
        </div>

        <div class="mt-10 border border-2 rounded-lg border-gray-300 p-4">
            <p>
                Add a new question to the survey
            </p>
            <form [formGroup]="questionsCanvasForm" (ngSubmit)="addQuestion()">
                <div class="p-2">
                    <label for="Title" class="block text-sm font-medium text-gray-700 pb-4 ml-2">
                        Question
                    </label>
                    <input type="text" 
                    name="question"  
                    formControlName="question"
                        class="block w-full ml-2 pr-12 sm:text-sm"
                        placeholder="Question">
                </div>
                <div class="p-2">
                    <label for="Title" class="block text-sm font-medium text-gray-700 pb-4 ml-2">
                        Description
                    </label>
                    <input type="text" 
                    name="description"  
                    formControlName="description"
                        class="block w-full ml-2 pr-12 sm:text-sm"
                        placeholder="Description">
                </div>
                <div class="grid grid-cols-2 gap-4">
                    <div class="p-2">
                        <label for="label1" class="block text-sm font-medium text-gray-700 pb-4 ml-2">
                            Option 1
                        </label>
                        <input type="text" 
                        name="label1"  
                        formControlName="label1"
                            class="block w-full ml-2 pr-12 sm:text-sm"
                            placeholder="Option 1">
                    </div>
                    <div class="p-2">
                        <label for="label2" class="block text-sm font-medium text-gray-700 pb-4 ml-2">
                            Option 2
                        </label>
                        <input type="text" 
                        name="label2"  
                        formControlName="label2"
                            class="block w-full ml-2 pr-12 sm:text-sm"
                            placeholder="Option 2">
                    </div>
                </div>
                <div class="text-right">
                    <button type="submit" class="border border-gray-300 rounded-xl px-4 mt-4 ml-2 justify-items-end" *ngIf="isAdmin">
                        Add Question
                    </button>
                </div>
            </form>
        </div>
    </div>

</div>

<button class="absolute bottom-10 right-10" (click)="toggleCanvasDisplay($event)" *ngIf="!showCanvas">
    <svg xmlns="http://www.w3.org/2000/svg"  class="h-12 w-12 text-blue-600" fill="none" viewBox="0 0 24 24" stroke="currentColor">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1" d="M12 9v3m0 0v3m0-3h3m-3 0H9m12 0a9 9 0 11-18 0 9 9 0 0118 0z" />
      </svg>
</button>

